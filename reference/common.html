<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Common submodule &mdash; Rainforest QPE library  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=b3ba4146"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Examples" href="../examples.html" />
    <link rel="prev" title="rainforest.ml package" href="rainforest.ml.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Rainforest QPE library
          </a>
              <div class="version">
                1.4.4
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usage.html#access-library">Access library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage.html#keeping-database-up-to-date">Keeping database up-to-date</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage.html#keeping-randomforest-model-up-to-date">Keeping randomForest model up-to-date</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="interface.html">Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="qpe.html">QPE submodule</a><ul>
<li class="toctree-l3"><a class="reference internal" href="qpe_cmd.html">QPE command-line tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="qpe_cmd.html#qpe-compute"><em>qpe_compute</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="qpe_cmd.html#qpe-plot"><em>qpe_plot</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="qpe_cmd.html#qpe-evaluation"><em>qpe_evaluation</em></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="rainforest.qpe.html">rainforest.qpe package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="rainforest.qpe.html#module-rainforest.qpe.evaluation">rainforest.qpe.evaluation module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="rainforest.qpe.html#rainforest.qpe.evaluation.evaluation"><code class="docutils literal notranslate"><span class="pre">evaluation()</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="rainforest.qpe.html#module-rainforest.qpe.qpe">rainforest.qpe.qpe module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="rainforest.qpe.html#rainforest.qpe.qpe.QPEProcessor"><code class="docutils literal notranslate"><span class="pre">QPEProcessor</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="rainforest.qpe.html#module-rainforest.qpe.qpe_compute">rainforest.qpe.qpe_compute module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="rainforest.qpe.html#rainforest.qpe.qpe_compute.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="rainforest.qpe.html#module-rainforest.qpe.qpe_evaluation">rainforest.qpe.qpe_evaluation module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="rainforest.qpe.html#rainforest.qpe.qpe_evaluation.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="rainforest.qpe.html#module-rainforest.qpe.qpe_plot">rainforest.qpe.qpe_plot module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="rainforest.qpe.html#rainforest.qpe.qpe_plot.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="db.html">Database submodule</a><ul>
<li class="toctree-l3"><a class="reference internal" href="db_structure.html">Database structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="db_structure.html#gauge-table"><em>Gauge table</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="db_structure.html#reference-table"><em>Reference table</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="db_structure.html#radar-table"><em>Radar table</em></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="db_options.html">Database configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="db_cmd.html">Database command-line tool</a><ul>
<li class="toctree-l4"><a class="reference internal" href="db_cmd.html#db-populate"><em>db_populate</em></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="rainforest.database.html">rainforest.database package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="rainforest.database.html#module-rainforest.database.database">rainforest.database.database module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="rainforest.database.html#rainforest.database.database.DataFrameWithInfo"><code class="docutils literal notranslate"><span class="pre">DataFrameWithInfo</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="rainforest.database.html#rainforest.database.database.Database"><code class="docutils literal notranslate"><span class="pre">Database</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="rainforest.database.html#rainforest.database.database.TableDict"><code class="docutils literal notranslate"><span class="pre">TableDict</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="rainforest.database.html#module-rainforest.database.db_populate">rainforest.database.db_populate module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="rainforest.database.html#rainforest.database.db_populate.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="rainforest.database.html#module-rainforest.database.retrieve_radar_data">rainforest.database.retrieve_radar_data module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="rainforest.database.html#rainforest.database.retrieve_radar_data.Updater"><code class="docutils literal notranslate"><span class="pre">Updater</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="rainforest.database.html#rainforest-database-retrieve-reference-data-module">rainforest.database.retrieve_reference_data module</a></li>
<li class="toctree-l4"><a class="reference internal" href="rainforest.database.html#rainforest-database-retrieve-dwh-data-r-module">rainforest.database.retrieve_dwh_data R module</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ml.html">ML submodule</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ml_cmd.html">Machine-learning command-line tool</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ml_cmd.html#rf-train"><em>rf_train</em></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="rainforest.ml.html">rainforest.ml package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="rainforest.ml.html#module-rainforest.ml.rf">rainforest.ml.rf module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="rainforest.ml.html#rainforest.ml.rf.RFTraining"><code class="docutils literal notranslate"><span class="pre">RFTraining</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="rainforest.ml.html#module-rainforest.ml.rf_train">rainforest.ml.rf_train module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="rainforest.ml.html#rainforest.ml.rf_train.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="rainforest.ml.html#module-rainforest.ml.rfdefinitions">rainforest.ml.rfdefinitions module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="rainforest.ml.html#rainforest.ml.rfdefinitions.MyCustomUnpickler"><code class="docutils literal notranslate"><span class="pre">MyCustomUnpickler</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="rainforest.ml.html#rainforest.ml.rfdefinitions.RandomForestRegressorBC"><code class="docutils literal notranslate"><span class="pre">RandomForestRegressorBC</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="rainforest.ml.html#rainforest.ml.rfdefinitions.read_rf"><code class="docutils literal notranslate"><span class="pre">read_rf()</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="rainforest.ml.html#module-rainforest.ml.utils">rainforest.ml.utils module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="rainforest.ml.html#rainforest.ml.utils.nesteddictvalues"><code class="docutils literal notranslate"><span class="pre">nesteddictvalues()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="rainforest.ml.html#rainforest.ml.utils.split_event"><code class="docutils literal notranslate"><span class="pre">split_event()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="rainforest.ml.html#rainforest.ml.utils.split_years"><code class="docutils literal notranslate"><span class="pre">split_years()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="rainforest.ml.html#rainforest.ml.utils.vert_aggregation"><code class="docutils literal notranslate"><span class="pre">vert_aggregation()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Common submodule</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-rainforest.common.io_data">rainforest.common.io_data module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.io_data.read_NWP_HZT_cart"><code class="docutils literal notranslate"><span class="pre">read_NWP_HZT_cart()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.io_data.read_cart"><code class="docutils literal notranslate"><span class="pre">read_cart()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.io_data.read_gif"><code class="docutils literal notranslate"><span class="pre">read_gif()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.io_data.read_polar"><code class="docutils literal notranslate"><span class="pre">read_polar()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.io_data.read_station_data"><code class="docutils literal notranslate"><span class="pre">read_station_data()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.io_data.read_status"><code class="docutils literal notranslate"><span class="pre">read_status()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.io_data.read_vpr"><code class="docutils literal notranslate"><span class="pre">read_vpr()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.io_data.read_xls"><code class="docutils literal notranslate"><span class="pre">read_xls()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.io_data.save_gif"><code class="docutils literal notranslate"><span class="pre">save_gif()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-rainforest.common.retrieve_data">rainforest.common.retrieve_data module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.retrieve_data.get_COSMO_T"><code class="docutils literal notranslate"><span class="pre">get_COSMO_T()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.retrieve_data.get_COSMO_variables"><code class="docutils literal notranslate"><span class="pre">get_COSMO_variables()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.retrieve_data.retrieve_AQC_XLS"><code class="docutils literal notranslate"><span class="pre">retrieve_AQC_XLS()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.retrieve_data.retrieve_CPCCV"><code class="docutils literal notranslate"><span class="pre">retrieve_CPCCV()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.retrieve_data.retrieve_hzt_RT"><code class="docutils literal notranslate"><span class="pre">retrieve_hzt_RT()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.retrieve_data.retrieve_hzt_prod"><code class="docutils literal notranslate"><span class="pre">retrieve_hzt_prod()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.retrieve_data.retrieve_prod"><code class="docutils literal notranslate"><span class="pre">retrieve_prod()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.retrieve_data.retrieve_prod_RT"><code class="docutils literal notranslate"><span class="pre">retrieve_prod_RT()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-rainforest.common.radarprocessing">rainforest.common.radarprocessing module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.radarprocessing.HZT_cartesian_to_polar"><code class="docutils literal notranslate"><span class="pre">HZT_cartesian_to_polar()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.radarprocessing.HZT_hourly_to_5min"><code class="docutils literal notranslate"><span class="pre">HZT_hourly_to_5min()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.radarprocessing.Radar"><code class="docutils literal notranslate"><span class="pre">Radar</span></code></a><ul>
<li class="toctree-l5"><a class="reference internal" href="#rainforest.common.radarprocessing.Radar.add_cosmo_data"><code class="docutils literal notranslate"><span class="pre">Radar.add_cosmo_data()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#rainforest.common.radarprocessing.Radar.add_height_over_iso0"><code class="docutils literal notranslate"><span class="pre">Radar.add_height_over_iso0()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#rainforest.common.radarprocessing.Radar.add_hzt_data"><code class="docutils literal notranslate"><span class="pre">Radar.add_hzt_data()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#rainforest.common.radarprocessing.Radar.compute_hydro"><code class="docutils literal notranslate"><span class="pre">Radar.compute_hydro()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#rainforest.common.radarprocessing.Radar.compute_kdp"><code class="docutils literal notranslate"><span class="pre">Radar.compute_kdp()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#rainforest.common.radarprocessing.Radar.compute_noise"><code class="docutils literal notranslate"><span class="pre">Radar.compute_noise()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#rainforest.common.radarprocessing.Radar.correct_attenuation"><code class="docutils literal notranslate"><span class="pre">Radar.correct_attenuation()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#rainforest.common.radarprocessing.Radar.correct_gate_altitude"><code class="docutils literal notranslate"><span class="pre">Radar.correct_gate_altitude()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#rainforest.common.radarprocessing.Radar.get_field"><code class="docutils literal notranslate"><span class="pre">Radar.get_field()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#rainforest.common.radarprocessing.Radar.snr_mask"><code class="docutils literal notranslate"><span class="pre">Radar.snr_mask()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#rainforest.common.radarprocessing.Radar.visib_mask"><code class="docutils literal notranslate"><span class="pre">Radar.visib_mask()</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.radarprocessing.hydroClass_single"><code class="docutils literal notranslate"><span class="pre">hydroClass_single()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.radarprocessing.hydroClass_single_over_iso"><code class="docutils literal notranslate"><span class="pre">hydroClass_single_over_iso()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-rainforest.common.constants">rainforest.common.constants module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.constants.MODE"><code class="docutils literal notranslate"><span class="pre">MODE()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-rainforest.common.graphics">rainforest.common.graphics module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.graphics.MidpointNormalize"><code class="docutils literal notranslate"><span class="pre">MidpointNormalize</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.graphics.QPE_cmap"><code class="docutils literal notranslate"><span class="pre">QPE_cmap</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.graphics.plot_crossval_stats"><code class="docutils literal notranslate"><span class="pre">plot_crossval_stats()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.graphics.qpe_plot"><code class="docutils literal notranslate"><span class="pre">qpe_plot()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.graphics.qpe_scatterplot"><code class="docutils literal notranslate"><span class="pre">qpe_scatterplot()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.graphics.score_plot"><code class="docutils literal notranslate"><span class="pre">score_plot()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-rainforest.common.lookup">rainforest.common.lookup module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.lookup.calc_lookup"><code class="docutils literal notranslate"><span class="pre">calc_lookup()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.lookup.get_lookup"><code class="docutils literal notranslate"><span class="pre">get_lookup()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-rainforest.common.utils">rainforest.common.utils module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.LV03toWGS84"><code class="docutils literal notranslate"><span class="pre">LV03toWGS84()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.aggregate_multi"><code class="docutils literal notranslate"><span class="pre">aggregate_multi()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.check_random_state"><code class="docutils literal notranslate"><span class="pre">check_random_state()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.chunks"><code class="docutils literal notranslate"><span class="pre">chunks()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.dict_flatten"><code class="docutils literal notranslate"><span class="pre">dict_flatten()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.envyaml"><code class="docutils literal notranslate"><span class="pre">envyaml()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.get_qpe_files"><code class="docutils literal notranslate"><span class="pre">get_qpe_files()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.get_qpe_files_multiple_dirs"><code class="docutils literal notranslate"><span class="pre">get_qpe_files_multiple_dirs()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.get_version"><code class="docutils literal notranslate"><span class="pre">get_version()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.hex_to_rgb"><code class="docutils literal notranslate"><span class="pre">hex_to_rgb()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.idx_cart"><code class="docutils literal notranslate"><span class="pre">idx_cart()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.nanadd_at"><code class="docutils literal notranslate"><span class="pre">nanadd_at()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.nearest_time"><code class="docutils literal notranslate"><span class="pre">nearest_time()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.nested_dict_gen"><code class="docutils literal notranslate"><span class="pre">nested_dict_gen()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.nested_dict_values"><code class="docutils literal notranslate"><span class="pre">nested_dict_values()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.perfscores"><code class="docutils literal notranslate"><span class="pre">perfscores()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.quantile"><code class="docutils literal notranslate"><span class="pre">quantile()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.quantile_1D"><code class="docutils literal notranslate"><span class="pre">quantile_1D()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.read_df"><code class="docutils literal notranslate"><span class="pre">read_df()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.read_task_file"><code class="docutils literal notranslate"><span class="pre">read_task_file()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.rename_fields"><code class="docutils literal notranslate"><span class="pre">rename_fields()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.round_to_hour"><code class="docutils literal notranslate"><span class="pre">round_to_hour()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.split_by_time"><code class="docutils literal notranslate"><span class="pre">split_by_time()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.stack_uneven"><code class="docutils literal notranslate"><span class="pre">stack_uneven()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.sweepnumber_fromfile"><code class="docutils literal notranslate"><span class="pre">sweepnumber_fromfile()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.timefromfilename"><code class="docutils literal notranslate"><span class="pre">timefromfilename()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.timestamp_from_datestr"><code class="docutils literal notranslate"><span class="pre">timestamp_from_datestr()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.timestamp_from_datetime"><code class="docutils literal notranslate"><span class="pre">timestamp_from_datetime()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.utils.wgs84toCH1903"><code class="docutils literal notranslate"><span class="pre">wgs84toCH1903()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-rainforest.common.wgs84_ch1903">rainforest.common.wgs84_ch1903 module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#rainforest.common.wgs84_ch1903.GPSConverter"><code class="docutils literal notranslate"><span class="pre">GPSConverter</span></code></a><ul>
<li class="toctree-l5"><a class="reference internal" href="#rainforest.common.wgs84_ch1903.GPSConverter.CHtoWGSheight"><code class="docutils literal notranslate"><span class="pre">GPSConverter.CHtoWGSheight()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#rainforest.common.wgs84_ch1903.GPSConverter.CHtoWGSlat"><code class="docutils literal notranslate"><span class="pre">GPSConverter.CHtoWGSlat()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#rainforest.common.wgs84_ch1903.GPSConverter.CHtoWGSlng"><code class="docutils literal notranslate"><span class="pre">GPSConverter.CHtoWGSlng()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#rainforest.common.wgs84_ch1903.GPSConverter.LV03toWGS84"><code class="docutils literal notranslate"><span class="pre">GPSConverter.LV03toWGS84()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#rainforest.common.wgs84_ch1903.GPSConverter.WGS84toLV03"><code class="docutils literal notranslate"><span class="pre">GPSConverter.WGS84toLV03()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#rainforest.common.wgs84_ch1903.GPSConverter.WGStoCHh"><code class="docutils literal notranslate"><span class="pre">GPSConverter.WGStoCHh()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#rainforest.common.wgs84_ch1903.GPSConverter.WGStoCHx"><code class="docutils literal notranslate"><span class="pre">GPSConverter.WGStoCHx()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#rainforest.common.wgs84_ch1903.GPSConverter.WGStoCHy"><code class="docutils literal notranslate"><span class="pre">GPSConverter.WGStoCHy()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Examples</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Rainforest QPE library</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Reference</a></li>
      <li class="breadcrumb-item active">Common submodule</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/reference/common.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="common-submodule">
<span id="common"></span><h1>Common submodule<a class="headerlink" href="#common-submodule" title="Permalink to this heading"></a></h1>
<p>This module provides routines that are used throughout the library.</p>
<p><a class="reference internal" href="#module-rainforest.common.io_data" title="rainforest.common.io_data"><code class="xref py py-mod docutils literal notranslate"><span class="pre">rainforest.common.io_data</span></code></a> : read various MCH data formats</p>
<p><a class="reference internal" href="#module-rainforest.common.retrieve_data" title="rainforest.common.retrieve_data"><code class="xref py py-mod docutils literal notranslate"><span class="pre">rainforest.common.retrieve_data</span></code></a> : retrieve MCH files (COSMO, polar, Cartesian) from storage</p>
<p><a class="reference internal" href="#module-rainforest.common.radarprocessing" title="rainforest.common.radarprocessing"><code class="xref py py-mod docutils literal notranslate"><span class="pre">rainforest.common.radarprocessing</span></code></a> : radar processing routines</p>
<p><a class="reference internal" href="#module-rainforest.common.constants" title="rainforest.common.constants"><code class="xref py py-mod docutils literal notranslate"><span class="pre">rainforest.common.constants</span></code></a> : define constants used throughout the code</p>
<p><a class="reference internal" href="#module-rainforest.common.graphics" title="rainforest.common.graphics"><code class="xref py py-mod docutils literal notranslate"><span class="pre">rainforest.common.graphics</span></code></a> : creating plots for QPE realization and evaluation</p>
<p><a class="reference internal" href="#module-rainforest.common.lookup" title="rainforest.common.lookup"><code class="xref py py-mod docutils literal notranslate"><span class="pre">rainforest.common.lookup</span></code></a> : computing and reading lookup tables that are used for interpolation and geolocalization of data</p>
<p><a class="reference internal" href="#module-rainforest.common.lookup" title="rainforest.common.lookup"><code class="xref py py-mod docutils literal notranslate"><span class="pre">rainforest.common.lookup</span></code></a> : various small utilities used throughout the  code</p>
<section id="module-rainforest.common.io_data">
<span id="rainforest-common-io-data-module"></span><h2>rainforest.common.io_data module<a class="headerlink" href="#module-rainforest.common.io_data" title="Permalink to this heading"></a></h2>
<p>Functions to read MeteoSwiss products</p>
<p>Daniel Wolfensberger
MeteoSwiss/EPFL
<a class="reference external" href="mailto:daniel&#46;wolfensberger&#37;&#52;&#48;epfl&#46;ch">daniel<span>&#46;</span>wolfensberger<span>&#64;</span>epfl<span>&#46;</span>ch</a>
December 2019</p>
<p>Modified by
Rebecca Gugerli
MeteoSwiss/EPFL
March 2022</p>
<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.io_data.read_NWP_HZT_cart">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.io_data.</span></span><span class="sig-name descname"><span class="pre">read_NWP_HZT_cart</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cart_file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.io_data.read_NWP_HZT_cart" title="Permalink to this definition"></a></dt>
<dd><p>Reads the HZT fields that are produced for operational use and returns a grid object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fileIn</strong> – path with filename</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Masked array of data</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>data</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.io_data.read_cart">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.io_data.</span></span><span class="sig-name descname"><span class="pre">read_cart</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cart_file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.io_data.read_cart" title="Permalink to this definition"></a></dt>
<dd><p>Generic function that reads a Cartesian radar file, either in gif or
binary format (ELDES or as generated by the qpe module of this library)
and converts its data to floating numbers</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>cart_file</strong> (<em>str</em>) – Full path of the file to read as a a string</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>The cartesian data in a numpy array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.io_data.read_gif">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.io_data.</span></span><span class="sig-name descname"><span class="pre">read_gif</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gif_file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.io_data.read_gif" title="Permalink to this definition"></a></dt>
<dd><p>Reads a Cartesian radar file in gif format</p>
<p>TODO: Replace with function rad4alp_gif_readers.py from pyart</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>gif_file</strong> (<em>str</em>) – Full path of the file to read as a a string</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>The cartesian data in a numpy array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.io_data.read_polar">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.io_data.</span></span><span class="sig-name descname"><span class="pre">read_polar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">polar_files</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">physic_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.io_data.read_polar" title="Permalink to this definition"></a></dt>
<dd><p>Reads a polar radar metranet file as a pyart radar instance, if multiple
files corresponding to multiple elevations (sweeps) are provided they are
merged into a single pyart instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>polar_files</strong> (<em>str</em><em> or </em><em>list</em><em> of </em><em>strings</em>) – <p>Can be either:
- Full path of the file to read as a a string
- string with wildcard pointing to the files to read,</p>
<blockquote>
<div><p>e.g. …../MLA192711055.*</p>
</div></blockquote>
<ul class="simple">
<li><p>a list of full filepaths</p></li>
</ul>
</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>sweepnumbers</strong> (<em>list</em>) – list of sweeps numbers corresponding to all files that were read</p></li>
<li><p><strong>merged</strong> (<em>a pyart Radar instance</em>)</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.io_data.read_station_data">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.io_data.</span></span><span class="sig-name descname"><span class="pre">read_station_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gauge_file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.io_data.read_station_data" title="Permalink to this definition"></a></dt>
<dd><p>Reads gauge data as given by the Climap software</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>gauge_file</strong> (<em>str</em>) – Full path of the file to read as a a string</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>The cartesian data in a numpy array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.io_data.read_status">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.io_data.</span></span><span class="sig-name descname"><span class="pre">read_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">status_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_wet_radome</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.io_data.read_status" title="Permalink to this definition"></a></dt>
<dd><p>Reads a radar xml status file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> (<em>str</em>) – Full path of the status xml file to be read</p></li>
<li><p><strong>add_wet_Radome</strong> (<em>boolean</em><em> (</em><em>optional</em><em>)</em>) – For older files, there is not information about the wet radome.
If this is true, the script will estimate the wet radome precipitation
as a 3 x 3 mean of the RZC product at the given time (as is done for
more recent files)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>The status as a python dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.io_data.read_vpr">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.io_data.</span></span><span class="sig-name descname"><span class="pre">read_vpr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xml_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.io_data.read_vpr" title="Permalink to this definition"></a></dt>
<dd><p>Reads a vpr xml file and returns an interpolator that can be used to obtain
the vpr correction at any altitude</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>vpr_file</strong> (<em>str</em>) – <p>Full path of the file to read
radar : char (optional)</p>
<blockquote>
<div><p>the radar is required to know the vpr reference height, it needs
to be either ‘A’,’D’,’L’,’P’ or ‘W’, if not specified, it will be
inferred from the vpr filename</p>
</div></blockquote>
</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>An interpolator that returns the vpr correction as a function of</em></p></li>
<li><p><em>the height, the correction is a multiplicative factor</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.io_data.read_xls">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.io_data.</span></span><span class="sig-name descname"><span class="pre">read_xls</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xls_file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.io_data.read_xls" title="Permalink to this definition"></a></dt>
<dd><p>Reads an excel file such as those used for CPC vlaidation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fname</strong> (<em>str</em>) – Full path of the excel file to be read</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>The excel file as a Pandas dataframe</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.io_data.save_gif">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.io_data.</span></span><span class="sig-name descname"><span class="pre">save_gif</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gif_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">precip</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.io_data.save_gif" title="Permalink to this definition"></a></dt>
<dd><p>Saves a precipitation map in float to a gif file (AQC format)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gif_file</strong> (<em>str</em>) – Full path of the file to write as a a string</p></li>
<li><p><strong>precip</strong> (<em>2D array</em>) – 2D array containing the precipitation intensities</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-rainforest.common.retrieve_data">
<span id="rainforest-common-retrieve-data-module"></span><h2>rainforest.common.retrieve_data module<a class="headerlink" href="#module-rainforest.common.retrieve_data" title="Permalink to this heading"></a></h2>
<p>Functions to retrieve MeteoSwiss products from the archives</p>
<p>Daniel Wolfensberger, Rebecca Gugerli
MeteoSwiss/EPFL
<a class="reference external" href="mailto:daniel&#46;wolfensberger&#37;&#52;&#48;epfl&#46;ch">daniel<span>&#46;</span>wolfensberger<span>&#64;</span>epfl<span>&#46;</span>ch</a>, <a class="reference external" href="mailto:rebecca&#46;gugerli&#37;&#52;&#48;epfl&#46;ch">rebecca<span>&#46;</span>gugerli<span>&#64;</span>epfl<span>&#46;</span>ch</a>
December 2019, July 2022</p>
<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.retrieve_data.get_COSMO_T">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.retrieve_data.</span></span><span class="sig-name descname"><span class="pre">get_COSMO_T</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sweeps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.retrieve_data.get_COSMO_T" title="Permalink to this definition"></a></dt>
<dd><p>Retrieves COSMO temperature data from the CSCS repository, and
interpolates them to the radar gates, using precomputed lookup tables</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time</strong> (<em>datetime.datetime instance</em>) – the time at which to get the COSMO data in datetime format</p></li>
<li><p><strong>sweeps</strong> (<em>list</em><em> of </em><em>integers</em>) – specify which sweeps (elevations) need to be retrieved in the form
of a list, if not specified, all 20 will be retrieved</p></li>
<li><p><strong>radar</strong> (<em>list</em><em> of </em><em>chars</em>) – list of radars for which to retrieve COSMO data, if not specified
all 5 radars will be used (‘A’,’L’,’D’,’W’,’P’)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>T_at_radar</strong> – A dict containing the temperature at the radar gates, in the following form:
dict[radar][‘T’][sweep_number]</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.retrieve_data.get_COSMO_variables">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.retrieve_data.</span></span><span class="sig-name descname"><span class="pre">get_COSMO_variables</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variables</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sweeps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tmp_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/tmp/'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cleanup</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.retrieve_data.get_COSMO_variables" title="Permalink to this definition"></a></dt>
<dd><p>Retrieves COSMO data from the CSCS repository, and
interpolates them to the radar gates, using precomputed lookup tables
This is a more generic but much slower function than the previous one,
as it reads all COSMO variables directly from the GRIB files</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time</strong> (<em>datetime.datetime instance</em>) – the time at which to get the COSMO data in datetime format</p></li>
<li><p><strong>variables</strong> (<em>list</em><em> of </em><em>strings</em>) – List of COSMO variables to retrieve, ex. P, T, QV, QR, RH, etc…</p></li>
<li><p><strong>sweeps</strong> (<em>list</em><em> of </em><em>integers</em><em> (</em><em>optional</em><em>)</em>) – specify which sweeps (elevations) need to be retrieved in the form
of a list, if not specified, all 20 will be retrieved</p></li>
<li><p><strong>(</strong><strong>optional</strong><strong>)</strong> (<em>cleanup = boolean</em>) – list of radars for which to retrieve COSMO data, if not specified
all 5 radars will be used (‘A’,’L’,’D’,’W’,’P’)</p></li>
<li><p><strong>(</strong><strong>optional</strong><strong>)</strong> – Directory where to store the extracted files</p></li>
<li><p><strong>(</strong><strong>optional</strong><strong>)</strong> – If true all extracted files will be deleted before returning the output
(recommended)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>A dict containing the COSMO variables at the radar gates, in the following</em></p></li>
<li><p><strong>form</strong> (<em>dict[radar][variables][sweep_number]</em>)</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.retrieve_data.retrieve_AQC_XLS">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.retrieve_data.</span></span><span class="sig-name descname"><span class="pre">retrieve_AQC_XLS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stations</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.retrieve_data.retrieve_AQC_XLS" title="Permalink to this definition"></a></dt>
<dd><p>Retrieves cross-validation CPC data for a set of stations from
the xls files prepared by Yanni</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time</strong> (<em>datetime.datetime instance</em>) – starting time of the time range</p></li>
<li><p><strong>stations</strong> (<em>list</em><em> of </em><em>str</em>) – list of weather stations at which to retrieve the CPC.CV data</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>A numpy array corresponding at the CPC.CV estimations at every specified</em></p></li>
<li><p><em>station</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.retrieve_data.retrieve_CPCCV">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.retrieve_data.</span></span><span class="sig-name descname"><span class="pre">retrieve_CPCCV</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stations</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.retrieve_data.retrieve_CPCCV" title="Permalink to this definition"></a></dt>
<dd><p>Retrieves cross-validation CPC data for a set of stations from
the xls files prepared by Yanni</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time</strong> (<em>datetime.datetime instance</em>) – starting time of the time range</p></li>
<li><p><strong>stations</strong> (<em>list</em><em> of </em><em>str</em>) – list of weather stations at which to retrieve the CPC.CV data</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>A numpy array corresponding at the CPC.CV estimations at every specified</em></p></li>
<li><p><em>station</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.retrieve_data.retrieve_hzt_RT">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.retrieve_data.</span></span><span class="sig-name descname"><span class="pre">retrieve_hzt_RT</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tstep</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.retrieve_data.retrieve_hzt_RT" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>Retrieves the preprocessed HZT products</dt><dd><p>A version adapted to real time implementation
Only used in for the function retrieve_hzt_prod</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>tstep</strong> (<em>datetime</em>) – directory where to store the unzipped files</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>A list containing all the filepaths of the retrieved files</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.retrieve_data.retrieve_hzt_prod">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.retrieve_data.</span></span><span class="sig-name descname"><span class="pre">retrieve_hzt_prod</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder_out</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pattern_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'shell'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.retrieve_data.retrieve_hzt_prod" title="Permalink to this definition"></a></dt>
<dd><p>Retrieves the preprocessed HZT products from the CSCS repository for a specified
time range, unzips them and places them in a specified folder</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>folder_out</strong> (<em>str</em>) – directory where to store the unzipped files</p></li>
<li><p><strong>start_time</strong> (<em>datetime.datetime instance</em>) – starting time of the time range</p></li>
<li><p><strong>end_time</strong> (<em>datetime.datetime instance</em>) – end time of the time range</p></li>
<li><p><strong>pattern_type</strong> (<em>either 'shell'</em><em> or </em><em>'regex'</em><em> (</em><em>optional</em><em>)</em>) – use ‘shell’ for standard shell patterns, which use * as wildcard
use ‘regex’ for more advanced regex patterns</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>A list containing all the filepaths of the retrieved files</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.retrieve_data.retrieve_prod">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.retrieve_data.</span></span><span class="sig-name descname"><span class="pre">retrieve_prod</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder_out</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">product_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pattern</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pattern_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'shell'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sweeps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.retrieve_data.retrieve_prod" title="Permalink to this definition"></a></dt>
<dd><p>Retrieves radar data from the CSCS repository for a specified
time range, unzips them and places them in a specified folder</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>folder_out</strong> (<em>str</em>) – directory where to store the unzipped files</p></li>
<li><p><strong>start_time</strong> (<em>datetime.datetime instance</em>) – starting time of the time range</p></li>
<li><p><strong>end_time</strong> (<em>datetime.datetime instance</em>) – end time of the time range</p></li>
<li><p><strong>product_name</strong> (<em>str</em>) – name of the product, as stored on CSCS, e.g. RZC, CPCH, MZC, BZC…</p></li>
<li><p><strong>pattern</strong> (<em>str</em>) – pattern constraint on file names, can be used for products which contain
multiple filetypes, f.ex CPCH folders contain both rda and gif files,
if only gifs are wanted : file_type = ‘<a href="#id1"><span class="problematic" id="id2">*</span></a>.gif’</p></li>
<li><p><strong>pattern_type</strong> (<em>either 'shell'</em><em> or </em><em>'regex'</em><em> (</em><em>optional</em><em>)</em>) – use ‘shell’ for standard shell patterns, which use * as wildcard
use ‘regex’ for more advanced regex patterns</p></li>
<li><p><strong>sweeps</strong> (<em>list</em><em> of </em><em>int</em><em> (</em><em>optional</em><em>)</em>) – For polar products, specifies which sweeps (elevations) must be
retrieved, if not specified all available sweeps will be retrieved</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>A list containing all the filepaths of the retrieved files</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.retrieve_data.retrieve_prod_RT">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.retrieve_data.</span></span><span class="sig-name descname"><span class="pre">retrieve_prod_RT</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">product_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pattern</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pattern_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'shell'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sweeps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.retrieve_data.retrieve_prod_RT" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>Adapted function from rainforest.common.retrieve_data</dt><dd><p>Here, it reads the data per timestep, and in the real-time
operation, the radar data is not zipped</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time</strong> (<em>datetime object</em>) – timestamp to extract</p></li>
<li><p><strong>product_name</strong> (<em>string</em>) – Name of the product to be extracted</p></li>
<li><p><strong>sweeps</strong> (<em>list</em>) – List of sweeps if not all want to be extracted. Defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If no data is found</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>dictionary containing with the the file list</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-rainforest.common.radarprocessing">
<span id="rainforest-common-radarprocessing-module"></span><h2>rainforest.common.radarprocessing module<a class="headerlink" href="#module-rainforest.common.radarprocessing" title="Permalink to this heading"></a></h2>
<p>Created on Mon Dec 16 17:38:52 2019
&#64;author: wolfensb, gugerlir</p>
<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.radarprocessing.HZT_cartesian_to_polar">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.radarprocessing.</span></span><span class="sig-name descname"><span class="pre">HZT_cartesian_to_polar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hzt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radar</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sweeps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">range(0,</span> <span class="pre">20)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.radarprocessing.HZT_cartesian_to_polar" title="Permalink to this definition"></a></dt>
<dd><p>Transform a Cartesian HZT object (height of freezing level) to a polar
Radar object with the freezing level at every gate on the Rad4Alp
domain</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>hzt</strong> (<em>pyart Grid object</em>) – Grid object that contains the hzt data, as obtained with
pyart.aux_io.read_cartesian_metranet</p></li>
<li><p><strong>radar</strong> (<em>char</em>) – name of the radar, ‘A’,’D’,’L’,’P’ or ‘W’</p></li>
<li><p><strong>sweeps</strong> (<em>list</em>) – list of Rad4Alp sweeps, from 0 to 20 to include in the polar radar
object</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.radarprocessing.HZT_hourly_to_5min">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.radarprocessing.</span></span><span class="sig-name descname"><span class="pre">HZT_hourly_to_5min</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filelist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tsteps_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.radarprocessing.HZT_hourly_to_5min" title="Permalink to this definition"></a></dt>
<dd><p>Function to interpolate the hourly isothermal fields to 5min resolution
to make them consistant with the radar fields</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time</strong> (<em>datetime object</em>) – timestep to calculate</p></li>
<li><p><strong>filelist</strong> (<em>dictionnary</em>) – list with timesteps, path and filename of HZT files only
typically derived in database.retrieve_radar_data.Updater.retrieve_radar_files()</p></li>
<li><p><strong>tsteps_min</strong> (<em>int</em>) – resolution of new fields in minutes</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dictionnary with datetime objects as keys and numpy.ma.core.MaskedArray (Cartesian coordinates)</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="rainforest.common.radarprocessing.Radar">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rainforest.common.radarprocessing.</span></span><span class="sig-name descname"><span class="pre">Radar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">radname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">polfiles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statusfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vprfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temp_ref</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'TAIR'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metranet_reader</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'C'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.radarprocessing.Radar" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class that contains polar radar data and performs some pre-processing
before adding that data to the database or computing the QPE product
The different elevations are stored in a dictionary rather as in a
single pyart radar instance as this was found to be faster in practice</p>
<p>Creates an Radar class instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>radname</strong> (<em>char</em>) – Name of the radar, either ‘A’,’D’,’L’,’P’ or ‘W’</p></li>
<li><p><strong>polfiles</strong> (<em>list</em><em> of </em><em>str</em>) – List of full filepaths of the radar files for a given timestemp,
one file for every elevation, typically obtained with
the retrieve_prod function in the common submodule</p></li>
<li><p><strong>statusfile</strong> (<em>str</em><em> (</em><em>optional</em><em>)</em>) – Full path of the status file that corresponds to this particular
radar and timestep, used to compute noise estimates</p></li>
<li><p><strong>vprfile</strong> (<em>str</em><em>(</em><em>optional</em><em>)</em>) – Full path of the vpr xml file that corresponds to this particular
radar and timestep, used to compute VPR correction</p></li>
<li><p><strong>metranet_reader</strong> (<em>str</em><em>(</em><em>optional</em><em>)</em>) – Which reader to use to read the polar radar data, can be either ‘C’ or ‘python’</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="rainforest.common.radarprocessing.Radar.add_cosmo_data">
<span class="sig-name descname"><span class="pre">add_cosmo_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cosmo_data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.radarprocessing.Radar.add_cosmo_data" title="Permalink to this definition"></a></dt>
<dd><p>Adds COSMO data to the radar instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>cosmo_data</strong> (<em>dict</em>) – <p>dict of COSMO data at polar coordinates obtained from the
get_COSMO_variables function in the common submodule
this dict must have the following format</p>
<blockquote>
<div><p>dic[variable][sweep]</p>
</div></blockquote>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="rainforest.common.radarprocessing.Radar.add_height_over_iso0">
<span class="sig-name descname"><span class="pre">add_height_over_iso0</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.radarprocessing.Radar.add_height_over_iso0" title="Permalink to this definition"></a></dt>
<dd><p>Function to derive the relative height over the 0° isothermal altitude
in meters by subtracting the altitude of the 0° isothermal altitude from
the altitude of the radar gate</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="rainforest.common.radarprocessing.Radar.add_hzt_data">
<span class="sig-name descname"><span class="pre">add_hzt_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hzt_cart</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.radarprocessing.Radar.add_hzt_data" title="Permalink to this definition"></a></dt>
<dd><p>Transform a Cartesian HZT object (height of freezing level) and
adds the fields to this radar object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>hzt</strong> (<em>Masked array as output from HZT_hourly_to_5min</em>) – from Grid object that contains the hzt data, as obtained with
pyart.aux_io.read_cartesian_metranet(filelist[tstamp_hzt0]).fields[‘iso0_height’][‘data’][0]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="rainforest.common.radarprocessing.Radar.compute_hydro">
<span class="sig-name descname"><span class="pre">compute_hydro</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.radarprocessing.Radar.compute_hydro" title="Permalink to this definition"></a></dt>
<dd><p>Computes the hydrometeor classification using Nikola Besic’
algorithm, all necessary fields
ZH, ZDR, RHOHV, KDP, T (COSMO) must be available</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="rainforest.common.radarprocessing.Radar.compute_kdp">
<span class="sig-name descname"><span class="pre">compute_kdp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dscfg</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.radarprocessing.Radar.compute_kdp" title="Permalink to this definition"></a></dt>
<dd><p>Computes KDP using the simple moving least-square algorithm</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dscfg</strong> (<em>dict</em>) – dictionary containing the following fields
RMIN:
RMAX:
RWIND:
ZMIN:
ZMAX:</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="rainforest.common.radarprocessing.Radar.compute_noise">
<span class="sig-name descname"><span class="pre">compute_noise</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.radarprocessing.Radar.compute_noise" title="Permalink to this definition"></a></dt>
<dd><p>Computes a noise estimate from a status file</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="rainforest.common.radarprocessing.Radar.correct_attenuation">
<span class="sig-name descname"><span class="pre">correct_attenuation</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.radarprocessing.Radar.correct_attenuation" title="Permalink to this definition"></a></dt>
<dd><p>Corrects for attenuation using the ZPHI algorithm (Testud et al.)
using the COSMO temperature to identify liquid precipitation
OR using the 0° isothermal altitude</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="rainforest.common.radarprocessing.Radar.correct_gate_altitude">
<span class="sig-name descname"><span class="pre">correct_gate_altitude</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.radarprocessing.Radar.correct_gate_altitude" title="Permalink to this definition"></a></dt>
<dd><p>Following the Swiss standard, we change the calculation of
the gate_altitude that is automatically done in pyart.
Instead of the constant radar scale factor of (ke) of 4/3,
we now use 1.25</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="rainforest.common.radarprocessing.Radar.get_field">
<span class="sig-name descname"><span class="pre">get_field</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sweep</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.radarprocessing.Radar.get_field" title="Permalink to this definition"></a></dt>
<dd><p>Gets a radar variable at given elevation (sweep)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sweep</strong> (<em>int</em>) – Sweep number from 1 to 20</p></li>
<li><p><strong>field_name</strong> (<em>str</em>) – name of the variable, e.g. ZH, ZDR, RHOHV, SW, …</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="rainforest.common.radarprocessing.Radar.snr_mask">
<span class="sig-name descname"><span class="pre">snr_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">snr_threshold</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.radarprocessing.Radar.snr_mask" title="Permalink to this definition"></a></dt>
<dd><p>Masks the radar data at low SNR</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>snr_threshold</strong> (<em>float</em>) – Minimal SNR to consider in dB</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="rainforest.common.radarprocessing.Radar.visib_mask">
<span class="sig-name descname"><span class="pre">visib_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">min_visib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_visib_corr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.radarprocessing.Radar.visib_mask" title="Permalink to this definition"></a></dt>
<dd><p>Masks the radar data at low visibility and corrects the reflectivity
for visibility</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>min_visib</strong> (<em>int</em>) – Minimal visibility below which the data is masked</p></li>
<li><p><strong>max_visib_corr</strong> (<em>float</em>) – Maximum visibility correction factor, the visibility correction
is 100/VISIB (with VISIB in %) and can be thresholded with this
parameter. This is usually set to 2 at MeteoSwiss</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.radarprocessing.hydroClass_single">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.radarprocessing.</span></span><span class="sig-name descname"><span class="pre">hydroClass_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">radars</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zdr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kdp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rhohv</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">array([1.,</span> <span class="pre">1.,</span> <span class="pre">1.,</span> <span class="pre">0.75,</span> <span class="pre">0.5])</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.radarprocessing.hydroClass_single" title="Permalink to this definition"></a></dt>
<dd><p>Computes the hydrometeor classes for columnar data, note that all input
arrays except weights must have the same length</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>radars</strong> (<em>ndarray</em><em> of </em><em>char</em>) – Array of radar IDs, (‘A’,’D’,’L’,’P’,’W’)</p></li>
<li><p><strong>zh</strong> (<em>ndarray</em>) – Array of radar reflectivity in dBZ</p></li>
<li><p><strong>zdr</strong> (<em>ndarray</em>) – Array of diff. reflectivity in dB</p></li>
<li><p><strong>kdp</strong> (<em>ndarray</em>) – Array of specific phase shift on propagation in deg / km</p></li>
<li><p><strong>rhohv</strong> (<em>ndarray</em>) – Array of copolar correlation coefficient</p></li>
<li><p><strong>temp</strong> (<em>ndarray</em>) – Array of radar temperature in Celcius</p></li>
<li><p><strong>weights</strong> (<em>ndarray</em><em> (</em><em>optional</em><em>)</em>) – The weight of every input feature, zh, zdr, kdp, rhohv, temp in the
hydrometeor classification</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>The hydrometeor classes as ndarray with values from 0 to 8, corresponding to</em></p></li>
<li><p><em>the classes</em> – 0 : no data
1 : aggregates (AG)
2 : light rain (LR)
3 : ice crystals (CR)
4 : rimed particles (RP)
5 : rain (RN)
6 : vertically aligned ice (VI)
7 : wet snow (WS)
8 : melting hail (MH)
9: dry hail / high density graupel (IH/HDG)</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.radarprocessing.hydroClass_single_over_iso">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.radarprocessing.</span></span><span class="sig-name descname"><span class="pre">hydroClass_single_over_iso</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">radars</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zdr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kdp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rhohv</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">H_ISO0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">array([1.,</span> <span class="pre">1.,</span> <span class="pre">1.,</span> <span class="pre">0.75,</span> <span class="pre">0.5])</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.radarprocessing.hydroClass_single_over_iso" title="Permalink to this definition"></a></dt>
<dd><p>Computes the hydrometeor classes for columnar data, note that all input
arrays except weights must have the same length</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>radars</strong> (<em>ndarray</em><em> of </em><em>char</em>) – Array of radar IDs, (‘A’,’D’,’L’,’P’,’W’)</p></li>
<li><p><strong>zh</strong> (<em>ndarray</em>) – Array of radar reflectivity in dBZ</p></li>
<li><p><strong>zdr</strong> (<em>ndarray</em>) – Array of diff. reflectivity in dB</p></li>
<li><p><strong>kdp</strong> (<em>ndarray</em>) – Array of specific phase shift on propagation in deg / km</p></li>
<li><p><strong>rhohv</strong> (<em>ndarray</em>) – Array of copolar correlation coefficient</p></li>
<li><p><strong>iso0_height</strong> (<em>ndarray</em>) – Array of 0° degree isotherm altitude</p></li>
<li><p><strong>weights</strong> (<em>ndarray</em><em> (</em><em>optional</em><em>)</em>) – The weight of every input feature, zh, zdr, kdp, rhohv, temp in the
hydrometeor classification</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>The hydrometeor classes as ndarray with values from 0 to 8, corresponding to</em></p></li>
<li><p><em>the classes</em> – 0 : no data
1 : aggregates (AG)
2 : light rain (LR)
3 : ice crystals (CR)
4 : rimed particles (RP)
5 : rain (RN)
6 : vertically aligned ice (VI)
7 : wet snow (WS)
8 : melting hail (MH)
9: dry hail / high density graupel (IH/HDG)</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-rainforest.common.constants">
<span id="rainforest-common-constants-module"></span><h2>rainforest.common.constants module<a class="headerlink" href="#module-rainforest.common.constants" title="Permalink to this heading"></a></h2>
<p>Set of constants regarding MeteoSwiss radars and QPE</p>
<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.constants.MODE">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.constants.</span></span><span class="sig-name descname"><span class="pre">MODE</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.constants.MODE" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-rainforest.common.graphics">
<span id="rainforest-common-graphics-module"></span><h2>rainforest.common.graphics module<a class="headerlink" href="#module-rainforest.common.graphics" title="Permalink to this heading"></a></h2>
<p>Set of functions to display QPE precipitation data and verification scores</p>
<dl class="py class">
<dt class="sig sig-object py" id="rainforest.common.graphics.MidpointNormalize">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rainforest.common.graphics.</span></span><span class="sig-name descname"><span class="pre">MidpointNormalize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.graphics.MidpointNormalize" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Normalize</span></code></p>
<p>Normalizing that is linear up to a certain transition value, logarithmic
afterwards</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vmin</strong> (<em>float</em><em> or </em><em>None</em>) – If <em>vmin</em> and/or <em>vmax</em> is not given, they are initialized from the
minimum and maximum value, respectively, of the first input
processed; i.e., <code class="docutils literal notranslate"><span class="pre">__call__(A)</span></code> calls <code class="docutils literal notranslate"><span class="pre">autoscale_None(A)</span></code>.</p></li>
<li><p><strong>vmax</strong> (<em>float</em><em> or </em><em>None</em>) – If <em>vmin</em> and/or <em>vmax</em> is not given, they are initialized from the
minimum and maximum value, respectively, of the first input
processed; i.e., <code class="docutils literal notranslate"><span class="pre">__call__(A)</span></code> calls <code class="docutils literal notranslate"><span class="pre">autoscale_None(A)</span></code>.</p></li>
<li><p><strong>clip</strong> (<em>bool</em><em>, </em><em>default: False</em>) – <p>Determines the behavior for mapping values outside the range
<code class="docutils literal notranslate"><span class="pre">[vmin,</span> <span class="pre">vmax]</span></code>.</p>
<p>If clipping is off, values outside the range <code class="docutils literal notranslate"><span class="pre">[vmin,</span> <span class="pre">vmax]</span></code> are also
transformed linearly, resulting in values outside <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1]</span></code>. For a
standard use with colormaps, this behavior is desired because colormaps
mark these outside values with specific colors for <em>over</em> or <em>under</em>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code> values falling outside the range <code class="docutils literal notranslate"><span class="pre">[vmin,</span> <span class="pre">vmax]</span></code>,
are mapped to 0 or 1, whichever is closer. This makes these values
indistinguishable from regular boundary values and can lead to
misinterpretation of the data.</p>
</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Returns 0 if <code class="docutils literal notranslate"><span class="pre">vmin</span> <span class="pre">==</span> <span class="pre">vmax</span></code>.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="rainforest.common.graphics.QPE_cmap">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rainforest.common.graphics.</span></span><span class="sig-name descname"><span class="pre">QPE_cmap</span></span><a class="headerlink" href="#rainforest.common.graphics.QPE_cmap" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">LinearSegmentedColormap</span></code></p>
<p>Colormap that uses purple tones for small values, and then a transition
from blue to red for values above the transition</p>
<p>Create colormap from linear mapping segments</p>
<p>segmentdata argument is a dictionary with a red, green and blue
entries. Each entry should be a list of <em>x</em>, <em>y0</em>, <em>y1</em> tuples,
forming rows in a table. Entries for alpha are optional.</p>
<p>Example: suppose you want red to increase from 0 to 1 over
the bottom half, green to do the same over the middle half,
and blue over the top half.  Then you would use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cdict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;red&#39;</span><span class="p">:</span>   <span class="p">[(</span><span class="mf">0.0</span><span class="p">,</span>  <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
                   <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span>  <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
                   <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span>  <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)],</span>

         <span class="s1">&#39;green&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="mf">0.0</span><span class="p">,</span>  <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
                   <span class="p">(</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
                   <span class="p">(</span><span class="mf">0.75</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
                   <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span>  <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)],</span>

         <span class="s1">&#39;blue&#39;</span><span class="p">:</span>  <span class="p">[(</span><span class="mf">0.0</span><span class="p">,</span>  <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
                   <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span>  <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
                   <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span>  <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)]}</span>
</pre></div>
</div>
<p>Each row in the table for a given color is a sequence of
<em>x</em>, <em>y0</em>, <em>y1</em> tuples.  In each sequence, <em>x</em> must increase
monotonically from 0 to 1.  For any input value <em>z</em> falling
between <em>x[i]</em> and <em>x[i+1]</em>, the output value of a given color
will be linearly interpolated between <em>y1[i]</em> and <em>y0[i+1]</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">row</span> <span class="n">i</span><span class="p">:</span>   <span class="n">x</span>  <span class="n">y0</span>  <span class="n">y1</span>
               <span class="o">/</span>
              <span class="o">/</span>
<span class="n">row</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span> <span class="n">x</span>  <span class="n">y0</span>  <span class="n">y1</span>
</pre></div>
</div>
<p>Hence y0 in the first row and y1 in the last row are never used.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">LinearSegmentedColormap.from_list</span></code></dt><dd><p>Static method; factory function for generating a smoothly-varying LinearSegmentedColormap.</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.graphics.plot_crossval_stats">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.graphics.</span></span><span class="sig-name descname"><span class="pre">plot_crossval_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stats</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_folder</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.graphics.plot_crossval_stats" title="Permalink to this definition"></a></dt>
<dd><p>Plots the results of a crossvalidation intercomparion as performed in
the rf.py module</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stats</strong> (<em>dict</em>) – dictionary containing the result statistics as obtained in the
rf.py:model_intercomparison function</p></li>
<li><p><strong>output_folder</strong> (<em>str</em>) – where to store the plots</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.graphics.qpe_plot">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.graphics.</span></span><span class="sig-name descname"><span class="pre">qpe_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subplots</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.04</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">120</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ch_border</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cbar_orientation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'horizontal'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.graphics.qpe_plot" title="Permalink to this definition"></a></dt>
<dd><p>Plots one or multiple QPE realizations using a special colormap, that
shows a clear transition between low and high precipitation intensities,
for low precipitation it is linear whereas for high precipitation it is
logarithmic</p>
<p>If multiple QPE realizations are given, they will be displayed as subplots</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>list</em><em> of </em><em>numpy arrays</em><em> or </em><em>numpy array</em>) – the set of QPE realizations to display</p></li>
<li><p><strong>subplots</strong> (<em>2-element tuple</em><em> (</em><em>optional</em><em>)</em>) – Tuple indicating the number of subplots in each direction,
the product of its elements must be equal to the number of QPE realizations
If not provided, the default will be (1,n) where n is the number of
realizations</p></li>
<li><p><strong>figsize</strong> (<em>2-element tuple</em><em> (</em><em>optional</em><em>)</em>) – Tuple indicating the size of the figure in inches in both directions
(w,h)</p></li>
<li><p><strong>vmin</strong> (<em>float</em><em> (</em><em>optional</em><em>)</em>) – Minimum value of precipitation to display, values below will be blank</p></li>
<li><p><strong>vmax</strong> (<em>float</em><em> (</em><em>optional</em><em>)</em>) – Maximum value of precipitation to display, values below above will
be shown with the color corresponding to vmax</p></li>
<li><p><strong>transition</strong> (<em>float</em><em> (</em><em>optional</em><em>)</em>) – The transition value from which to change colormap and switch
from linear to logarithmic scale</p></li>
<li><p><strong>ch_border</strong> (<em>bool</em><em> (</em><em>optiona</em><em>)</em>) – Whether to overlay the shapefile of the Swiss borders</p></li>
<li><p><strong>xlim</strong> (<em>2 element tuple</em><em> (</em><em>optional</em><em>)</em>) – limits of the plots in the west-east direction (in Swiss coordinates)</p></li>
<li><p><strong>ylim</strong> (<em>2 element tuple</em><em> (</em><em>optional</em><em>)</em>) – limits of the plots in the south-north direction (in Swiss coordinates)</p></li>
<li><p><strong>cbar_orientation</strong> (<em>str</em><em> (</em><em>optional</em><em>)</em>) – colorbar orientation, either ‘horizontal’ or ‘vertical’</p></li>
<li><p><strong>**kwargs</strong> – All additional arguments that can be passed to imshow</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Nothing</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.graphics.qpe_scatterplot">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.graphics.</span></span><span class="sig-name descname"><span class="pre">qpe_scatterplot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">qpe_est</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(10,</span> <span class="pre">7.5)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.graphics.qpe_scatterplot" title="Permalink to this definition"></a></dt>
<dd><p>Plots the results of multiple QPE models as a function of the
reference gauge measurement</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>qpe_est</strong> (<em>dict</em><em> of </em><em>arrays</em>) – Every value in the dictionary is a set of QPE estimates, every key
is a model</p></li>
<li><p><strong>ref</strong> (<em>np.ndarray</em>) – contains the reference observations (gauge), must have the same shape
as any element in qpe_est</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>title_prefix: str (optional)</dt><dd><p>a prefix for the suptitle (global titl</p>
</dd>
<dt>figsize: 2-element tuple (optional)</dt><dd><p>Tuple indicating the size of the figure in inches in both directions
(w,h)</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Nothing</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.graphics.score_plot">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.graphics.</span></span><span class="sig-name descname"><span class="pre">score_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scores</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(10,</span> <span class="pre">5)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.graphics.score_plot" title="Permalink to this definition"></a></dt>
<dd><p>Plots a series of QPE verification scores in the form of stacked
barplots, for different ranges of precipitation</p>
<p>IMPORTANT: the scores dictionary must have the following structure</p>
<p>scores[model][precip_range][score]</p>
<p>for example</p>
<p>scores[‘RF_dualpol’][‘0.0-2.0’][‘ME’] = -0.27</p>
<p>you can get such a dictionary with the perfscores function in common.utils
i.e. scores[‘RZC’] = perfscores(…)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scores</strong> (<em>dict</em><em> of </em><em>dict</em><em> of </em><em>dict</em><em> of </em><em>scores</em>) – the set of scores to display</p></li>
<li><p><strong>title_prefix</strong> (<em>str</em><em> (</em><em>optional</em><em>)</em>) – a prefix for the suptitle (global title)</p></li>
<li><p><strong>figsize</strong> (<em>2-element tuple</em><em> (</em><em>optional</em><em>)</em>) – Tuple indicating the size of the figure in inches in both directions
(w,h)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Nothing</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-rainforest.common.lookup">
<span id="rainforest-common-lookup-module"></span><h2>rainforest.common.lookup module<a class="headerlink" href="#module-rainforest.common.lookup" title="Permalink to this heading"></a></h2>
<p>Functions to read and compute lookup tables</p>
<p>The available lookup tables are</p>
<p><strong>qpebias_station</strong> : dict with the bias correction of RZC at every station</p>
<p><strong>cosmo1_to_rad</strong> : dict which maps COSMO grid to polar radar grid
it has  keys [sweep][coord_type], coord_type is ‘idx_0’ :
first index of COSMO grids, ‘idx_1’: second, ‘idx_3’: third,
mask’ is 1 for points that fall outside of COSMO domain. This lookup table
is valid only for COSMO data stored in /store/s83/owm/COSMO-1/</p>
<p><strong>cosmo2_to_rad</strong> : same thing but for COSMO 1E data</p>
<p><strong>cosmo2_to_rad</strong> : same thing but for COSMO 2 data</p>
<p><strong>cosmo1T_to_rad</strong> : same thing but for netCDF files of COSMO1 temperature
extracted for MDR and stored in /store/s83/owm/COSMO-1/ORDERS/MDR/</p>
<p><strong>cosmo1T_to_rad</strong> : same thing but for netCDF files of COSMO2 temperature
extracted for MDR and stored in /store/msrad/cosmo/cosmo2/data/</p>
<p><strong>station_to_rad</strong> : maps the SMN stations to radar coordinates, it is an
extraction of the more generic but less convenient <strong>qpegrid_to_rad</strong> table
It is list of 3 elements, first element is a dict with keys [station][sweep][ncode]
and gives the polar gates (azimuth_idx, range_idx) that fall within a Cartesian pixel
at a given radar elevation and for a given station neighbour (00 = station location,
-1-1 = one to the south-west, 22 = two km to north and 2 km to east)
second element is a dict giving distance from every station to the radar
third element is a dict of keys [station][sweep] giving the height above
ground of the radar observations above that station at a given elevation (sweep)
MISSING KEYS IMPLY NO RADAR VISIBILITY</p>
<p><strong>cartcoords_rad</strong> : gives the Cartesian (Swiss LV03) coordinates of all
polar gates. It is a dict that gives for every sweep a 3D array
of shape ncoords x nazimuth x nrange, ncoords is 3, first slice is
Swiss Y coordinate (west to east), second is Swiss X-coordinate (south to north)
and last is Swiss Z coordinate (altitude)</p>
<p><strong>qpegrid_to_rad</strong> : maps the radar polar data to any gridpoint of the Swiss
QPE grid. It is simply a 2D array with 5 columns
| sweep | azimuth_idx | range_idx | Swiss Y coord | Swiss X coord|</p>
<p><strong>qpegrid_to_height_rad</strong> : gives for every pixel of the Swiss Cartesian QPE grid
the average height of radar observations for a given radar, for every sweep. It is a dictionary
where the key is the sweep number ( 1 - 20) and the value is a 640 x 710 array of heights above ground</p>
<p><strong>station_to_qpegrid</strong> : maps every station to the corresponding QPE gridpoint
it is a dict of keys [station][ncode] and gives the index of every
neighbour of every station in the QPE 2D grid 640 x 710 pixels</p>
<p><strong>visibility_rad</strong> : gives the (static) visibility of every polar gate
for a given sweep number in the form of a 2D field of size nazimuth x nrange</p>
<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.lookup.calc_lookup">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.lookup.</span></span><span class="sig-name descname"><span class="pre">calc_lookup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lookup_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.lookup.calc_lookup" title="Permalink to this definition"></a></dt>
<dd><p>Calculates a lookup table and stores it in the /data/lookup_data folder</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lookup_type</strong> (<em>str</em>) – <p>the lookup table type, must be one of</p>
<ul>
<li><p>qpebias_station</p></li>
<li><p>cosmo1_to_rad</p></li>
<li><p>cosmo1e_to_rad</p></li>
<li><p>cosmo2_to_rad</p></li>
<li><p>cosmo1T_to_rad</p></li>
<li><p>cosmo2T_to_rad</p></li>
<li><p>station_to_rad</p></li>
<li><p>cartcoords_rad</p></li>
<li><p>qpegrid_to_rad</p></li>
<li><p>station_to_qpegrid</p></li>
<li><p>visibility_rad</p></li>
</ul>
</p></li>
<li><p><strong>radar</strong> (<em>char</em><em> or </em><em>list</em><em> of </em><em>chars</em><em> (</em><em>optional</em><em>)</em>) – the radar for which to retrieve the lookup table, needed only
if the lookup_type contains the term ‘rad’, must be either ‘A’, ‘D’, ‘L’,
‘W’ or ‘P’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.lookup.get_lookup">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.lookup.</span></span><span class="sig-name descname"><span class="pre">get_lookup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lookup_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.lookup.get_lookup" title="Permalink to this definition"></a></dt>
<dd><p>Read a lookup table from the /data/lookup_data folder</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lookup_type</strong> (<em>str</em>) – <p>the lookup table type, must be one of</p>
<ul>
<li><p>qpebias_station</p></li>
<li><p>cosmo1_to_rad</p></li>
<li><p>cosmo1e_to_rad</p></li>
<li><p>cosmo2_to_rad</p></li>
<li><p>cosmo1T_to_rad</p></li>
<li><p>cosmo2T_to_rad</p></li>
<li><p>station_to_rad</p></li>
<li><p>cartcoords_rad</p></li>
<li><p>qpegrid_to_rad</p></li>
<li><p>station_to_qpegrid</p></li>
<li><p>visibility_rad</p></li>
</ul>
</p></li>
<li><p><strong>radar</strong> (<em>char</em><em> or </em><em>list</em><em> of </em><em>chars</em><em> (</em><em>optional</em><em>)</em>) – the radar for which to retrieve the lookup table, needed only
if the lookup_type contains the term ‘rad’, must be either ‘A’, ‘D’, ‘L’,
‘W’ or ‘P’</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>lut</strong> – The lookup table in the form of a python dict</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-rainforest.common.utils">
<span id="rainforest-common-utils-module"></span><h2>rainforest.common.utils module<a class="headerlink" href="#module-rainforest.common.utils" title="Permalink to this heading"></a></h2>
<p>Set of functions that can be useful</p>
<p>Daniel Wolfensberger
MeteoSwiss/EPFL
<a class="reference external" href="mailto:daniel&#46;wolfensberger&#37;&#52;&#48;epfl&#46;ch">daniel<span>&#46;</span>wolfensberger<span>&#64;</span>epfl<span>&#46;</span>ch</a>
December 2019</p>
<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.LV03toWGS84">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">LV03toWGS84</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">east</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">north</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">heights</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.LV03toWGS84" title="Permalink to this definition"></a></dt>
<dd><p>Converts a set of WGS84, lat/lon/heights to Swiss CH1903 coordinates</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>east</strong> (<em>ndarray</em>) – Easterly Swiss coordinates (CHY)</p></li>
<li><p><strong>north</strong> (<em>ndarray</em>) – northerly Swiss coordinates (CHX)</p></li>
<li><p><strong>heights</strong> (<em>ndarray</em>) – heights a.s.l in WGS84 coordinates</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>lat, lon and height coordinates in WGS84</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.aggregate_multi">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">aggregate_multi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array_3d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agg_operators</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.aggregate_multi" title="Permalink to this definition"></a></dt>
<dd><p>Aggregates a 3D numpy array alongs its first axis, using different
aggregation operators</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array_3d</strong> (<em>ndarray</em>) – 3D numpy array, of shape (N x M x L)</p></li>
<li><p><strong>agg_operators</strong> (<em>ndarray</em><em> of </em><em>integers</em>) – array of aggregation operators as defined in the constants.py file,
must have the same length as the first dimension of array_3D (N)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>An aggregated array of size M x L</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.check_random_state">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">check_random_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seed</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.check_random_state" title="Permalink to this definition"></a></dt>
<dd><p>Turn seed into a np.random.RandomState instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>seed</strong> (<em>None</em><em>, </em><em>int</em><em> or </em><em>instance</em><em> of </em><em>RandomState</em>) – If seed is None, return the RandomState singleton used by np.random.
If seed is an int, return a new RandomState instance seeded with seed.
If seed is already a RandomState instance, return it.
Otherwise raise ValueError.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The random state object based on <cite>seed</cite> parameter.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy:numpy.random.RandomState</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.chunks">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">chunks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">l</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.chunks" title="Permalink to this definition"></a></dt>
<dd><p>Divides a list l into n sublists of similar sizes</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.dict_flatten">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">dict_flatten</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mydict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.dict_flatten" title="Permalink to this definition"></a></dt>
<dd><p>Flattens a nested dictionary</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.envyaml">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">envyaml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.envyaml" title="Permalink to this definition"></a></dt>
<dd><p>Reads a yaml configuration file while parsing environment variables.
Environment variables must be written as ${NAME_OF_VAR} in the yaml file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – path of the input yaml file</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the yaml content in the form of a python dict</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.get_qpe_files">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">get_qpe_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_agg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_models</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.get_qpe_files" title="Permalink to this definition"></a></dt>
<dd><p>Gets the list of all qpe files in a folder (as saved by qpe_compute)
and separates them by qpe type and timestep</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_folder</strong> (<em>str</em>) – main directory where the qpe files are saved, it contains one subfolder
for every qpe model (type) that was used</p></li>
<li><p><strong>t0</strong> (<em>datetime</em><em> (</em><em>optional</em><em>)</em>) – Starting time of the period to retrieve, will be used to filter files,
if not provided starting time will be time of first file</p></li>
<li><p><strong>t1</strong> (<em>datetime</em><em> (</em><em>optional</em><em>)</em>) – End time of the period to retrieve, will be used to filter files,
if not provided end time will be time of last file</p></li>
<li><p><strong>time_agg</strong> (<em>minutes</em><em> (</em><em>optional</em><em>)</em>) – Will aggregate all files to a reference time in minutes (e.g. use 10 to
put together all files that correspond to a single gauge measurement)</p></li>
<li><p><strong>list_models</strong> (<em>(</em><em>optional</em><em>)</em>) – List of qpe types to retrieve , if not provided all folders in input_folder
will be used</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>A dictionary where every key is a QPE model and every value is a list</em></p></li>
<li><p><em>with all files in chronological order</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.get_qpe_files_multiple_dirs">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">get_qpe_files_multiple_dirs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_agg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_models</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.get_qpe_files_multiple_dirs" title="Permalink to this definition"></a></dt>
<dd><p>Gets the list of all qpe files from multiple folders sorted according to DOY (as saved by qpe_compute)
and separates them by qpe type and timestep</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_folder</strong> (<em>str</em>) – main directory where the qpe files are saved, it contains one subfolder
for every qpe model (type) that was used</p></li>
<li><p><strong>t0</strong> (<em>datetime</em><em> (</em><em>optional</em><em>)</em>) – Starting time of the period to retrieve, will be used to filter files,
if not provided starting time will be time of first file</p></li>
<li><p><strong>t1</strong> (<em>datetime</em><em> (</em><em>optional</em><em>)</em>) – End time of the period to retrieve, will be used to filter files,
if not provided end time will be time of last file</p></li>
<li><p><strong>time_agg</strong> (<em>minutes</em><em> (</em><em>optional</em><em>)</em>) – Will aggregate all files to a reference time in minutes (e.g. use 10 to
put together all files that correspond to a single gauge measurement)</p></li>
<li><p><strong>list_models</strong> (<em>(</em><em>optional</em><em>)</em>) – List of qpe types to retrieve , if not provided all folders in the first input_folder
will be used</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>A dictionary where every key is a QPE model and every value is a list</em></p></li>
<li><p><em>with all files in chronological order</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.get_version">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">get_version</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.get_version" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.hex_to_rgb">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">hex_to_rgb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.hex_to_rgb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.idx_cart">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">idx_cart</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.idx_cart" title="Permalink to this definition"></a></dt>
<dd><p>Returns the Cartesian index of a set of coordinates x and y</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.nanadd_at">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">nanadd_at</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.nanadd_at" title="Permalink to this definition"></a></dt>
<dd><p>Replaces nans by zero in call to np.add.at</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.nearest_time">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">nearest_time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reference</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.nearest_time" title="Permalink to this definition"></a></dt>
<dd><p>Gets the nearest earlier reference timestep to a given datetime, for ex.
if dt = 1 Jan 2020 10:12, and reference is 10 it will return</p>
<blockquote>
<div><p>1 Jan 2020 10:10, or if dt = 1 Jan 2020 10:59 and reference is 60
it will return 1 Jan 2020 10:00</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dt</strong> (<em>datetime</em>) – The datetime to check</p></li>
<li><p><strong>reference</strong> (<em>int</em>) – The reference timestep in minutes</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>The closest earlier timestep in datetime format</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.nested_dict_gen">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">nested_dict_gen</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.nested_dict_gen" title="Permalink to this definition"></a></dt>
<dd><p>The generator for the previous function</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.nested_dict_values">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">nested_dict_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.nested_dict_values" title="Permalink to this definition"></a></dt>
<dd><p>Extracts all values from a nested dictionary</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.perfscores">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">perfscores</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">est_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bounds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">array</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.perfscores" title="Permalink to this definition"></a></dt>
<dd><p>Computes a set of precipitation performance scores, on different data ranges.
The scores are</p>
<blockquote>
<div><ul class="simple">
<li><p>scatter: 0.5 * (Qw84(x) - Qw16(x)), where Qw is a quantile weighted
by ref_data / sum(ref_data) and x is est_data / ref_data in dB scale</p></li>
<li><p>RMSE: root mean  square error (linear error)</p></li>
<li><p>bias:  (ME/mean(ref_data) + 1) in dB</p></li>
<li><p>ED: the energy distance which is a measure of the distance between
two distributions (<a class="reference external" href="https://en.wikipedia.org/wiki/Energy_distance">https://en.wikipedia.org/wiki/Energy_distance</a>)</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>est_data</strong> (<em>ndarray</em>) – array of estimates (ex. precip from QPE)</p></li>
<li><p><strong>ref_data</strong> (<em>ndarray</em>) – array of reference (ex. precip from gauge)</p></li>
<li><p><strong>bounds</strong> (<em>list</em><em> (</em><em>optional</em><em>)</em>) – list of bounds on ref_data for which to compute the error metrics,
by default all data will be used (unbounded), note that even if you
prescribe bounds the scores for the overall data will always be
added in the output</p></li>
<li><p><strong>array</strong> (<em>boolean</em><em> (</em><em>optional</em><em>)</em>) – Whether or not to convert the output dict to a numpy array</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>all_metrics</strong> – a dictionary containing all the scores, organized in the following way
all_metrics[bound][score]</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict or ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.quantile">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">quantile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quantile</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.quantile" title="Permalink to this definition"></a></dt>
<dd><p>Weighted quantile of an array with respect to the last axis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>ndarray</em>) – Input array.</p></li>
<li><p><strong>weights</strong> (<em>ndarray</em>) – Array with the weights. It must have the same size of the last
axis of <cite>data</cite>.</p></li>
<li><p><strong>quantile</strong> (<em>float</em>) – Quantile to compute. It must have a value between 0 and 1.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>quantile</strong> – The output value.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.quantile_1D">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">quantile_1D</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quantile</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.quantile_1D" title="Permalink to this definition"></a></dt>
<dd><p>Compute the weighted quantile of a 1D numpy array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>ndarray</em>) – Input array (one dimension).</p></li>
<li><p><strong>weights</strong> (<em>ndarray</em>) – Array with the weights of the same size of <cite>data</cite>.</p></li>
<li><p><strong>quantile</strong> (<em>float</em>) – Quantile to compute. It must have a value between 0 and 1.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>quantile_1D</strong> – The output value.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.read_df">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">read_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dbsystem</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'dask'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sqlContext</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.read_df" title="Permalink to this definition"></a></dt>
<dd><p>Reads a set of data contained in a folder as a spark or dask DataFrame</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pattern</strong> (<em>str</em>) – Unix style wildcard pattern pointing to the files, for example
/store/msrad/folder/<a href="#id3"><span class="problematic" id="id4">*</span></a>.csv will read all csv files in that folder</p></li>
<li><p><strong>dbsystem</strong> (<em>str</em>) – Either “dask” if you want a Dask DataFrame or “spark” if you want a
spark dataframe</p></li>
<li><p><strong>sqlContext</strong> (<em>sqlContext instance</em><em>, </em><em>new: SparkSession instant</em>) – sqlContext to use, required only if dbystem = ‘spark’</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>A spark or dask DataFrame instance</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.read_task_file">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">read_task_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task_file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.read_task_file" title="Permalink to this definition"></a></dt>
<dd><p>Reads a database processing task file</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.rename_fields">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">rename_fields</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.rename_fields" title="Permalink to this definition"></a></dt>
<dd><p>Rename pyart fields from pyrad names to simpler names, according to the
dictionary PYART_NAMES_MAPPING in the constants.py module</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.round_to_hour">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">round_to_hour</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dt</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.round_to_hour" title="Permalink to this definition"></a></dt>
<dd><p>Returns the sweep number of a polar file based on its name</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.split_by_time">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">split_by_time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">files_rad</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.split_by_time" title="Permalink to this definition"></a></dt>
<dd><p>Separate a list of files by their timestamp</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.stack_uneven">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">stack_uneven</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arrays</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">nan</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.stack_uneven" title="Permalink to this definition"></a></dt>
<dd><p>Fits mmltiple into a single numpy array, even if they are
different sizes, assigning a fill_value to parts with no data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arrays</strong> (<em>list</em><em> of </em><em>np arrays</em>) – list of numpy array to stack, they can have different dimensions</p></li>
<li><p><strong>fill_value</strong> (<em>(</em><em>float</em><em>, </em><em>optional</em><em>)</em>) – the fill value with which to fill the missing pixels</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>a np.ndarray with size N x M, where N is the sum of the number of</em></p></li>
<li><p><em>rows of all arrays and M is the maximal number of columns in all arrays</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.sweepnumber_fromfile">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">sweepnumber_fromfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.sweepnumber_fromfile" title="Permalink to this definition"></a></dt>
<dd><p>Returns the sweep number of a polar file based on its name</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.timefromfilename">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">timefromfilename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.timefromfilename" title="Permalink to this definition"></a></dt>
<dd><p>Returns the datetime of a file based on its name</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.timestamp_from_datestr">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">timestamp_from_datestr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datestr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.timestamp_from_datestr" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.timestamp_from_datetime">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">timestamp_from_datetime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dt</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.timestamp_from_datetime" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rainforest.common.utils.wgs84toCH1903">
<span class="sig-prename descclassname"><span class="pre">rainforest.common.utils.</span></span><span class="sig-name descname"><span class="pre">wgs84toCH1903</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lon</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">heights</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.utils.wgs84toCH1903" title="Permalink to this definition"></a></dt>
<dd><p>Converts a set of WGS84, lat/lon/heights to Swiss CH1903 coordinates,
east, north and height</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lat</strong> (<em>ndarray</em>) – latitudes in decimal format (degrees)</p></li>
<li><p><strong>lon</strong> (<em>ndarray</em>) – longitudes in decimal format (degrees)</p></li>
<li><p><strong>heights</strong> (<em>ndarray</em>) – heights a.s.l in WGS84 coordinates</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>east, north and height coordinates in CHLV190</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-rainforest.common.wgs84_ch1903">
<span id="rainforest-common-wgs84-ch1903-module"></span><h2>rainforest.common.wgs84_ch1903 module<a class="headerlink" href="#module-rainforest.common.wgs84_ch1903" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="rainforest.common.wgs84_ch1903.GPSConverter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rainforest.common.wgs84_ch1903.</span></span><span class="sig-name descname"><span class="pre">GPSConverter</span></span><a class="headerlink" href="#rainforest.common.wgs84_ch1903.GPSConverter" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>GPS Converter class which is able to perform convertions between the
CH1903 and WGS84 system.</p>
<dl class="py method">
<dt class="sig sig-object py" id="rainforest.common.wgs84_ch1903.GPSConverter.CHtoWGSheight">
<span class="sig-name descname"><span class="pre">CHtoWGSheight</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">h</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.wgs84_ch1903.GPSConverter.CHtoWGSheight" title="Permalink to this definition"></a></dt>
<dd><p>Convert CH y/x/h to WGS height</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="rainforest.common.wgs84_ch1903.GPSConverter.CHtoWGSlat">
<span class="sig-name descname"><span class="pre">CHtoWGSlat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.wgs84_ch1903.GPSConverter.CHtoWGSlat" title="Permalink to this definition"></a></dt>
<dd><p>Convert CH y/x to WGS lat</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="rainforest.common.wgs84_ch1903.GPSConverter.CHtoWGSlng">
<span class="sig-name descname"><span class="pre">CHtoWGSlng</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.wgs84_ch1903.GPSConverter.CHtoWGSlng" title="Permalink to this definition"></a></dt>
<dd><p>Convert CH y/x to WGS long</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="rainforest.common.wgs84_ch1903.GPSConverter.LV03toWGS84">
<span class="sig-name descname"><span class="pre">LV03toWGS84</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">east</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">north</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.wgs84_ch1903.GPSConverter.LV03toWGS84" title="Permalink to this definition"></a></dt>
<dd><p>Convert LV03 to WGS84. Return a tuple of floating point numbers
containing lat, long, and height</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="rainforest.common.wgs84_ch1903.GPSConverter.WGS84toLV03">
<span class="sig-name descname"><span class="pre">WGS84toLV03</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">latitude</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">longitude</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ellHeight</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.wgs84_ch1903.GPSConverter.WGS84toLV03" title="Permalink to this definition"></a></dt>
<dd><p>Convert WGS84 to LV03. Return a tuple of floating point numbers
containing east, north, and height</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="rainforest.common.wgs84_ch1903.GPSConverter.WGStoCHh">
<span class="sig-name descname"><span class="pre">WGStoCHh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lng</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">h</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.wgs84_ch1903.GPSConverter.WGStoCHh" title="Permalink to this definition"></a></dt>
<dd><p>Convert WGS lat/long (° dec) and height to CH h</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="rainforest.common.wgs84_ch1903.GPSConverter.WGStoCHx">
<span class="sig-name descname"><span class="pre">WGStoCHx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lng</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.wgs84_ch1903.GPSConverter.WGStoCHx" title="Permalink to this definition"></a></dt>
<dd><p>Convert WGS lat/long (° dec) to CH x</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="rainforest.common.wgs84_ch1903.GPSConverter.WGStoCHy">
<span class="sig-name descname"><span class="pre">WGStoCHy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lng</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rainforest.common.wgs84_ch1903.GPSConverter.WGStoCHy" title="Permalink to this definition"></a></dt>
<dd><p>Convert WGS lat/long (° dec) to CH y</p>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="rainforest.ml.html" class="btn btn-neutral float-left" title="rainforest.ml package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../examples.html" class="btn btn-neutral float-right" title="Examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Daniel Wolfensherger, Rebecca Gugerli.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>